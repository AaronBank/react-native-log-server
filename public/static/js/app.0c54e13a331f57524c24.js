webpackJsonp([1],{"+bvs":function(t,e,a){"use strict";var n=a("woOf"),r=a.n(n),s=a("O2Dw");a.n(s);e.a={props:["data"],data:function(){return{activeName:"图片类型",pageData:r()(s.defaultPageData,this.data)}},mounted:function(){},methods:{handleClick:function(t,e){},uploaded:function(t,e){console.log(e),this.pageData.backgroundImage="",this.$emit("change",this.pageData)},updateData:function(){console.log(this.pageData),this.$emit("change",this.pageData)}}}},"0TwP":function(t,e){},"2NXm":function(t,e,a){"use strict";function n(t){a("sYSp")}var r=a("Ued4"),s=a("8LsI"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-4621c37a",null);e.a=c.exports},4650:function(t,e,a){"use strict";function n(t,e,a,n){var s={credentials:"include",method:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}};return"get"==t&&(e=e.indexOf("?")>0?e+"&"+r(a):e+"?"+r(a)),"post"==t&&(s.body=r(a)),fetch(e,s)}function r(t){if(t){var e=[];for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];e.push(a+"="+n)}return e.join("&")}return""}var s=a("Xxa5"),o=a.n(s),i=a("exGp"),c=a.n(i),l={};l.get=function(t,e){return n("get",t,e,{})},l.getJson=function(){var t=c()(o.a.mark(function t(e,a){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("get",e,a);case 3:return r=t.sent,t.abrupt("return",r.json());case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{code:-1});case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,a){return t.apply(this,arguments)}}(),l.post=function(t,e,a){return n("post",t,e,a)},l.postJson=function(){var t=c()(o.a.mark(function t(e,a,r){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("post",e,a,r);case 3:return s=t.sent,t.abrupt("return",s.json());case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{code:-1});case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,a,n){return t.apply(this,arguments)}}(),e.a=l},"5p5d":function(t,e,a){"use strict";function n(t){a("OGfK")}var r=a("eJpE"),s=a("YXS0"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-d5ca2e5c",null);e.a=c.exports},"68GR":function(t,e){},"8LsI":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header",attrs:{height:"50px"}},[a("el-button",{staticClass:"no-btn",attrs:{type:"primary",icon:"el-icon-menu"},on:{click:t.leftmenu}}),t._v("\n      达令™ TPM\n      "),a("div",{staticStyle:{float:"right"}},[a("el-dropdown",{on:{command:t.selectAdd}},[a("el-button",{staticClass:"no-btn",attrs:{type:"primary"}},[t._v("\n            创建新页面"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"add_m"}},[t._v("移动端页面")])],1)],1),t._v(" "),t.isLogin?a("el-dropdown",{on:{command:t.selectAdd}},[a("el-button",{staticClass:"no-btn",attrs:{type:"primary"}},[t._v("\n            "+t._s(t.nickname)+"\n          ")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"quit"}},[t._v("退出登录")])],1)],1):t._e(),t._v(" "),t.isLogin?t._e():a("el-button",{staticClass:"no-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1),t._v(" "),a("el-container",[a("el-aside",{staticClass:"menu",attrs:{width:"150px"}},[a("el-menu",{attrs:{"default-active":"1",collapse:t.isCollapse}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-mobile-phone"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("移动端")])])],1)],1),t._v(" "),a("el-container",[a("el-main",{staticClass:"list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"current-row-key":"id"}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"title",label:"页面标题",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"线上地址",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("span",[t._v("未部署")]):a("a",{attrs:{href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"update_time",label:"修改时间",width:"200"}}),t._v(" "),t.isLogin?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{staticClass:"mini-btn",attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("\n      编辑")]),t._v(" "),a("el-button",{staticClass:"mini-btn",attrs:{type:"warning",size:"mini"},on:{click:function(a){t.handleDraff(e.$index,e.row)}}},[t._v("\n      部署")])],1),t._v(" "),a("el-button",{staticClass:"mini-btn",attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}})]}}])}):t._e()],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage1,"page-size":20,layout:"prev, pager, next",total:t.count},on:{"current-change":t.goNext,"update:currentPage":function(e){t.currentPage1=e}}})],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"",visible:t.showLogin,width:"30%"},on:{"update:visible":function(e){t.showLogin=e}}},[a("el-input",{attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-warning"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("p"),t._v(" "),a("el-input",{attrs:{placeholder:"请输入密码",type:"password","prefix-icon":"el-icon-warning"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showLogin=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.goLogin}},[t._v("确 定")])],1)],1)],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},"8m74":function(t,e,a){"use strict";function n(t){a("T4N0")}var r=a("GJRJ"),s=a("QRCP"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-6cb21cf8",null);e.a=c.exports},COrm:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:function(t){t.stopPropagation()}}},[a("el-tabs",{staticClass:"bg",attrs:{value:"base"},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{name:"base"}},[a("span",{staticClass:"tab-title",attrs:{slot:"label"},slot:"label"},[t._v("图片模块")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form-table",attrs:{model:t.blockData}},[a("el-form-item",{attrs:{label:"添加热区"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addRange}},[t._v("添加")])],1),t._v(" "),a("el-form-item",{attrs:{label:"背景色"}},[a("el-color-picker",{on:{change:t.updateColor},model:{value:t.blockData.backgroundColor,callback:function(e){t.$set(t.blockData,"backgroundColor",e)},expression:"blockData.backgroundColor"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"背景图片"}},[a("el-upload",{ref:"uploader",attrs:{"on-success":t.uploaded,action:"/api/imgs/upload","list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"背景图片"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.delImg}},[t._v("删除背景图片")])],1),t._v(" "),a("el-form-item",{attrs:{label:"高度"}},[a("el-input",{attrs:{size:"small"},on:{blur:t.updateHeight},model:{value:t.blockData.height,callback:function(e){t.$set(t.blockData,"height",e)},expression:"blockData.height"}})],1)],1)],1)],1),t._v(" "),t.currentItem?a("div",{staticClass:"bg"},[a("div",{staticClass:"title"},[t._v("编辑热点")]),t._v(" "),a("el-form",{staticClass:"form-table",attrs:{model:t.currentItem,"label-width":"65px"}},[a("el-form-item",{attrs:{label:"链接sku"}},[a("el-input",{attrs:{size:"small"},on:{blur:t.submitData},model:{value:t.currentItem.sku,callback:function(e){t.$set(t.currentItem,"sku",e)},expression:"currentItem.sku"}})],1)],1)],1):t._e()],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},D6r2:function(t,e,a){"use strict";e.a={data:function(){return{msg:""}}}},F9dg:function(t,e,a){"use strict";function n(t){a("u9f8")}var r=a("M0n7"),s=a("clis"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-13a80b1c",null);e.a=c.exports},GJRJ:function(t,e,a){"use strict";var n=a("mvHQ"),r=a.n(n),s=a("Xxa5"),o=a.n(s),i=a("exGp"),c=a.n(i),l=a("snNv"),u=a("F9dg"),d=a("HzJU"),p=a("YPfK"),f=a("5p5d"),m=a("O2Dw"),g=(a.n(m),a("4650"));e.a={components:{"page-editor":l.a,"img-module":u.a,"img-editor":d.a,"product-module":p.a,"product-editor":f.a},data:function(){return{id:0,currentIndex:-1,currentData:null,settingTop:"0px",page:m.defaultPageData,blocks:[]}},mounted:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id=t.$route.params.id,t.id){e.next=4;break}return t.$router.push("/"),e.abrupt("return");case 4:t.refresh();case 5:case"end":return e.stop()}},e,t)}))()},methods:{refresh:function(){var t=this;return c()(o.a.mark(function e(){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getJson("/api/pages/get/"+t.id);case 2:a=e.sent;try{n=JSON.parse(a.data.preset),n&&(t.page.title=n.page.title,t.page.desc=n.page.desc,t.page.backgroundColor=n.page.backgroundColor,t.page.backgroundImage=n.page.backgroundImage,t.blocks=n.blocks)}catch(t){console.log(t)}case 4:case"end":return e.stop()}},e,t)}))()},back:function(){this.$router.push("/")},seePrew:function(){},cancelSelect:function(){this.currentIndex=-1,this.currentData=null},addMoudle:function(t){this[t]&&this[t]()},add_img:function(){this.blocks.push(Object(m.imgFactory)())},add_pro:function(){this.blocks.push(Object(m.productFactory)())},updateBlock:function(t){this.submitData()},selectMoudle:function(t,e){this.currentIndex=t,this.currentData=e;for(var a=0,n=0;n<t;n++)a+=this.$refs["block-"+n][0].offsetHeight;a+=this.$refs["block-"+t][0].offsetHeight/2-46,a<0&&(a=0),this.settingTop=a+"px"},movePre:function(){var t=this;return c()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.blocks.splice(t.currentIndex,1),setTimeout(function(){t.blocks.splice(t.currentIndex-1,0,a)},0);case 2:case"end":return e.stop()}},e,t)}))()},moveNext:function(){var t=this,e=this.blocks.filter(function(e,a){if(a!==t.currentIndex)return e}),a=this.blocks[this.currentIndex];e.splice(this.currentIndex+1,0,a),this.blocks=e,console.log(this.blocks)},del:function(){this.blocks.splice(this.currentIndex,1),this.cancelSelect()},submitData:function(t){var e=this;return c()(o.a.mark(function t(){var a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},a.title=e.page.title,a.desc=e.page.desc,a.data=r()({page:e.page,blocks:e.blocks}),console.log(a),t.next=7,g.a.postJson("/api/pages/update/"+e.id,a);case 7:n=t.sent;case 8:case"end":return t.stop()}},t,e)}))()}}}},HG5u:function(t,e){},HzJU:function(t,e,a){"use strict";function n(t){a("0TwP")}var r=a("t929"),s=a("COrm"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-74299f69",null);e.a=c.exports},Luci:function(t,e,a){"use strict";function n(t){a("68GR")}var r=a("D6r2"),s=a("eyQw"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-1ee69e2a",null);e.a=c.exports},M0n7:function(t,e,a){"use strict";var n=a("/oe5"),r=a.n(n),s=a("O2Dw"),o=(a.n(s),a("TgjV"));e.a={components:{VueDraggableResizable:r.a},props:["block","selected","id"],data:function(){return{blockData:this.block,currentRange:-1}},mounted:function(){var t=this;o.a.$on("addRange",function(e){e===t.id&&(t.blockData.ranges.push(Object(s.rangeFactory)()),t.submitData())}),o.a.$on("updateBase",function(e,a){if(e===t.id){for(var n in a)if(a.hasOwnProperty(n)&&"ranges"!==n){var r=a[n];t.blockData[n]=r}t.submitData()}}),o.a.$on("updateRange",function(e,a){console.log(e),e===t.id&&(t.blockData.ranges=t.blockData.ranges.filter(function(e,n){return n==t.currentRange&&(e=a),e}),t.submitData())})},methods:{onDrag:function(t,e){var a=this;this.blockData.ranges=this.blockData.ranges.filter(function(n,r){return a.currentRange==r&&(n.x=t,n.y=e),n}),this.submitData()},onResize:function(t,e,a,n){var r=this;this.blockData.ranges=this.blockData.ranges.filter(function(s,o){return r.currentRange==o&&(s.x=t,s.y=e,s.w=a,s.h=n),s}),this.submitData()},onActivate:function(t){this.currentRange=t,o.a.imgData=this.blockData.ranges[t],o.a.$emit("current",this.id,this.blockData.ranges[t])},deActivate:function(t){},checkDrag:function(t){/draggable|handle/.test((t.target||t.srcElemt).className)||(this.currentRange=-1,o.a.$emit("current",this.id,null))},delRange:function(t,e){for(var a=this,n=[],r=0;r<this.blockData.ranges.length;r++){var s=this.blockData.ranges[r];s!==e&&n.push(s)}this.blockData.ranges=[],setTimeout(function(){a.blockData.ranges=n,a.submitData()},0)},submitData:function(){this.$emit("change",this.blockData)}}}},M93x:function(t,e,a){"use strict";function n(t){a("ZKZI")}var r=a("xJD8"),s=a("rA+P"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,null,null);e.a=c.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r=a("M93x"),s=a("YaEn"),o=a("zL8q"),i=a.n(o),c=a("tvR6");a.n(c);n.default.config.productionTip=!1,n.default.use(i.a),new n.default({el:"#app",router:s.a,template:"<App/>",components:{App:r.a}})},O2Dw:function(t,e){e.defaultPageData={title:"",desc:"",backgroundColor:"",backgroundImage:""},e.imgFactory=function(){return{type:"img",id:"block_"+(new Date).getTime(),backgroundColor:"",backgroundImage:"",height:200,ranges:[]}},e.rangeFactory=function(){return{id:"range_"+(new Date).getTime(),x:355,y:100,w:100,h:50,sku:""}},e.productFactory=function(){return{type:"product",id:"block_"+(new Date).getTime(),backgroundColor:"",listChannel:"10",listAttr:["goodsShowName","goodsShowDesc","image","salePrice","marketPrice"],list:[],styles:{},itemStyles:{},itemOffset:{x:0,y:0}}},e.productItemFactory=function(){return{sku:"",title:""}}},OGfK:function(t,e){},QRCP:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header",attrs:{height:"50px"}},[a("div",{staticClass:"item"},[a("el-button",{staticClass:"no-btn",staticStyle:{padding:"12px 15px"},attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:t.back}})],1),t._v(" "),a("div",{staticClass:"item"},[a("el-dropdown",{attrs:{placement:"bottom-start"},on:{command:t.addMoudle}},[a("el-button",{staticClass:"no-btn",attrs:{type:"primary",icon:"el-icon-plus"}},[t._v("\n          添加模块"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"add_img"}},[t._v("图片模块")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"add_pro"}},[t._v("产品列表模块")])],1)],1)],1),t._v(" "),a("div",{staticClass:"item"})]),t._v(" "),a("div",{on:{click:t.cancelSelect}},[a("el-container",{staticClass:"wrap"},[a("div",[a("div",{attrs:{id:"main"}},t._l(t.blocks,function(e,n){return a("div",{key:n,ref:"block-"+n,refInFor:!0,on:{click:function(a){a.stopPropagation(),t.selectMoudle(n,e)}}},[a(e.type+"-module",{tag:"div",attrs:{selected:t.currentIndex==n,id:e.id,block:e},on:{change:t.updateBlock}})])}))]),t._v(" "),a("div",{attrs:{id:"setting"}},[t.currentData?a("div",{staticClass:"content",style:{top:t.settingTop}},[a("div",{staticClass:"item"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-close"},on:{click:function(e){e.stopPropagation(),t.del(e)}}})],1)]):t._e()]),t._v(" "),a("div",[a("div",{attrs:{id:"editor"}},[t.currentData?a("div",t._l(t.blocks,function(e,n){return a("div",{key:n},[a(e.type+"-editor",{directives:[{name:"show",rawName:"v-show",value:n==t.currentIndex,expression:"index==currentIndex"}],tag:"div",attrs:{id:e.id,block:e},on:{change:t.submitData}})])})):a("page-editor",{attrs:{data:t.page},on:{change:t.submitData,"update:data":function(e){t.page=e}}})],1)])])],1)],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},R89i:function(t,e){},RJLw:function(t,e,a){"use strict";var n=(a("TgjV"),a("/oe5")),r=a.n(n);e.a={components:{VueDraggableResizable:r.a},props:["block","id"],data:function(){return{blockData:this.block.list,blockStyle:this.block.styles,currentItem:null}},mounted:function(){console.log(this.blockData)},methods:{}}},T4N0:function(t,e){},TgjV:function(t,e,a){"use strict";var n=a("7+uW");e.a=new n.default({data:{}})},Ued4:function(t,e,a){"use strict";var n=a("Xxa5"),r=a.n(n),s=a("exGp"),o=a.n(s),i=a("4650");e.a={name:"index",data:function(){return{isCollapse:!1,list:[],count:0,currentPage1:1,isLogin:!1,showLogin:!1,username:"",pwd:"",nickname:""}},mounted:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getJson("/api/auth");case 2:a=e.sent,1==a.code&&(t.isLogin=!0,t.nickname=a.data),t.refresh();case 5:case"end":return e.stop()}},e,t)}))()},methods:{refresh:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getJson("/api/pages/list");case 2:a=e.sent,a.data.rows.map(function(e){return e.update_time=t.formatTime(e.update_time),e}),t.count=a.data.count,t.list=a.data.rows;case 6:case"end":return e.stop()}},e,t)}))()},formatTime:function(t){var e=new Date(t),a="yyyy-MM-dd";return a=a.replace("yyyy",e.getFullYear()),a=a.replace("MM",e.getMonth()+1),a=a.replace("dd",e.getDate())},selectAdd:function(t){console.log(t),this[t]&&this[t]()},goNext:function(t){var e=this;return o()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.currentPage1=t,a.next=3,i.a.getJson("/api/pages/list",{limit:t});case 3:n=a.sent,n.data.rows.map(function(t){return t.update_time=e.formatTime(t.update_time),t}),e.count=n.data.count,e.list=n.data.rows;case 7:case"end":return a.stop()}},a,e)}))()},add_m:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getJson("/api/pages/create");case 2:a=e.sent,1==a.code&&t.$router.push("/item/"+a.data);case 4:case"end":return e.stop()}},e,t)}))()},leftmenu:function(){this.isCollapse=!this.isCollapse},quit:function(){this.isLogin=!1,document.cookie="token="},login:function(){this.showLogin=!0},goLogin:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.postJson("/api/auth/login",{username:t.username,pwd:t.pwd});case 2:a=e.sent,1==a.code&&(t.isLogin=!0,t.nickname=a.data,t.refresh()),t.showLogin=!1;case 5:case"end":return e.stop()}},e,t)}))()},handleDraff:function(t,e){var a=this;return o()(r.a.mark(function n(){var s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.$confirm("是否部署该页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return n.next=5,i.a.postJson("/api/pages/draff/"+e.id);case 5:if(s=n.sent,1===s.code){n.next=8;break}return n.abrupt("return");case 8:a.list=a.list.filter(function(e,a){return a==t&&(e.status=1),e}),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}},n,a,[[0,11]])}))()},handleEdit:function(t,e){this.$router.push("/item/"+e.id)},handleDelete:function(t,e){var a=this;return o()(r.a.mark(function n(){var s,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return s=n.sent,n.next=6,i.a.getJson("/api/pages/del",{id:e.id});case 6:if(o=n.sent,1==o.code){n.next=9;break}return n.abrupt("return");case 9:a.list=a.list.filter(function(e,a){if(a!=t)return e}),n.next=14;break;case 12:n.prev=12,n.t0=n.catch(0);case 14:case"end":return n.stop()}},n,a,[[0,12]])}))()}}}},YJzO:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg"},[a("div",{staticClass:"title"},[t._v("\n        页面设置\n    ")]),t._v(" "),a("el-tabs",{attrs:{value:"base"},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{name:"base"}},[a("span",{staticClass:"tab-title",attrs:{slot:"label"},slot:"label"},[t._v("基本信息")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form-table",attrs:{model:t.pageData}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请填写标题"},on:{blur:t.updateData},model:{value:t.pageData.title,callback:function(e){t.$set(t.pageData,"title",e)},expression:"pageData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请填写说明"},on:{blur:t.updateData},model:{value:t.pageData.desc,callback:function(e){t.$set(t.pageData,"desc",e)},expression:"pageData.desc"}})],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{name:"bg"}},[a("span",{staticClass:"tab-title",attrs:{slot:"label"},slot:"label"},[t._v("背景信息")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form-table",attrs:{model:t.pageData}},[a("el-form-item",{attrs:{label:"背景色"}},[a("el-color-picker",{on:{change:t.updateData},model:{value:t.pageData.backgroundColor,callback:function(e){t.$set(t.pageData,"backgroundColor",e)},expression:"pageData.backgroundColor"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"背景图片"}},[a("el-upload",{attrs:{"on-success":t.uploaded,action:"https://jsonplaceholder.typicode.com/posts/",limit:1,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)],1)],1)],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},YPfK:function(t,e,a){"use strict";function n(t){a("HG5u")}var r=a("RJLw"),s=a("osx0"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-6e4b13f0",null);e.a=c.exports},YXS0:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"bg"},[a("div",{staticClass:"title"},[t._v("\n            商品列表设置\n        ")]),t._v(" "),a("el-tabs",{staticClass:"bg",attrs:{value:"base"},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{name:"base"}},[a("span",{staticClass:"tab-title",attrs:{slot:"label"},slot:"label"},[t._v("基本样式")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form-table"},[a("el-form-item",{attrs:{label:"背景色"}},[a("el-color-picker",{on:{change:t.updateColor},model:{value:t.block.backgroundColor,callback:function(e){t.$set(t.block,"backgroundColor",e)},expression:"block.backgroundColor"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示列数"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.submitData},model:{value:t.block.listChannel,callback:function(e){t.$set(t.block,"listChannel",e)},expression:"block.listChannel"}},[a("el-radio-button",{attrs:{label:"10"}},[t._v("单列")]),t._v(" "),a("el-radio-button",{attrs:{label:"5"}},[t._v("双列")])],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{name:"items"}},[a("span",{staticClass:"tab-title",attrs:{slot:"label"},slot:"label"},[t._v("商品样式")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form-table"},[a("el-form-item",{attrs:{label:"添加热区"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addRange}},[t._v("添加")])],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{name:"list"}},[a("span",{staticClass:"tab-title",attrs:{slot:"label"},slot:"label"},[t._v("商品列表")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form-table"},[a("div",{staticClass:"row"},[a("el-input",{attrs:{placeholder:"请输入sku。多个使用英文,分割"},model:{value:t.skus,callback:function(e){t.skus=e},expression:"skus"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addSku}},[t._v("添加")])],1),t._v(" "),a("div",{staticClass:"row"},t._l(t.blockData,function(e,n){return a("div",{key:n,staticClass:"item"},[t._v("\n                            "+t._s(e.goodsShowName)+"\n                        ")])}))])],1)],1)],1)])},r=[],s={render:n,staticRenderFns:r};e.a=s},YaEn:function(t,e,a){"use strict";var n=a("7+uW"),r=a("/ocq"),s=a("2NXm"),o=a("8m74"),i=a("Luci");n.default.use(r.a),e.a=new r.a({routes:[{path:"/",name:"index",component:s.a},{path:"/item/:id",name:"item",component:o.a},{path:"/login",name:"login",component:i.a}]})},ZKZI:function(t,e){},clis:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img",style:{backgroundColor:t.blockData.backgroundColor,height:t.blockData.height+"px"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:t.blockData.backgroundImage}}),t._v(" "),a("div",{staticClass:"mark",on:{click:t.checkDrag}},t._l(t.blockData.ranges,function(e,n){return a("vue-draggable-resizable",{key:n,staticClass:"range",attrs:{active:t.selected&&n==t.currentRange,cancel:!1,w:e.w,h:e.h,x:e.x,y:e.y,parent:!0},on:{dragstop:t.onDrag,resizestop:t.onResize,activated:function(e){t.onActivate(n)},deactivated:function(e){t.deActivate(n)}}},[t.selected&&n==t.currentRange?a("i",{staticClass:"el-icon-error handle-close",on:{click:function(a){t.delRange(n,e)}}}):t._e()])}))])},r=[],s={render:n,staticRenderFns:r};e.a=s},eJpE:function(t,e,a){"use strict";var n=a("Xxa5"),r=a.n(n),s=a("Gu7T"),o=a.n(s),i=a("exGp"),c=a.n(i),l=a("4650");a("TgjV");e.a={props:["block","id"],data:function(){return{blockData:this.block.list,blockStyle:this.block.styles,currentItem:null,skus:""}},methods:{handleClick:function(){},addSku:function(){var t=this;return c()(r.a.mark(function e(){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.skus){e.next=2;break}return e.abrupt("return",t.$message.error("请填写sku"));case 2:return e.next=4,l.a.getJson("/api/product/"+t.skus);case 4:n=e.sent,console.log(n),(a=t.blockData).push.apply(a,o()(n)),t.submitData();case 8:case"end":return e.stop()}},e,t)}))()},addRange:function(){},updateColor:function(t){console.log(t)},submitData:function(){this.$emit("change")}}}},eyQw:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-aside")],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},osx0:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pro_list",style:{backgroundColor:t.block.backgroundColor}},t._l(t.blockData,function(e,n){return a("div",{key:n,style:{width:t.block.listChannel+"0%"}},[a("img",{attrs:{src:e.image}})])}))},r=[],s={render:n,staticRenderFns:r};e.a=s},"rA+P":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s={render:n,staticRenderFns:r};e.a=s},sYSp:function(t,e){},snNv:function(t,e,a){"use strict";function n(t){a("R89i")}var r=a("+bvs"),s=a("YJzO"),o=a("VU/8"),i=n,c=o(r.a,s.a,!1,i,"data-v-54f73b1a",null);e.a=c.exports},t929:function(t,e,a){"use strict";var n=a("woOf"),r=a.n(n),s=a("TgjV"),o=a("O2Dw");a.n(o);e.a={props:["block","id"],data:function(){return{blockData:r()(Object(o.imgFactory)(),this.block),currentItem:null}},mounted:function(){var t=this;s.a.$on("current",function(e,a){e==t.id&&(t.currentItem=a)}),this.currentItem=s.a.imgData},methods:{handleClick:function(t,e){},updateColor:function(t){this.blockData.backgroundColor=t,s.a.$emit("updateBase",this.id,this.blockData)},uploaded:function(t,e){var a=this;1==t.code&&(this.blockData.backgroundImage=t.data,s.a.$emit("updateBase",this.id,this.blockData),setTimeout(function(){a.$refs.uploader.clearFiles()},1e3))},delImg:function(){this.blockData.backgroundImage="",s.a.$emit("updateBase",this.id,this.blockData)},updateHeight:function(){s.a.$emit("updateBase",this.id,this.blockData)},addRange:function(){s.a.$emit("addRange",this.id)},submitData:function(){s.a.$emit("updateRange",this.id,this.currentItem)}}}},tvR6:function(t,e){},u9f8:function(t,e){},xJD8:function(t,e,a){"use strict";e.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.0c54e13a331f57524c24.js.map